<!DOCTYPE html>
<html>

<body>

	
	<button onClick=scan()>scan</button>
	<script>

function scan(){
window.onload = function() {
		var o = [], h = [], l = [], c=[], d=[], t=[], s=[], RSIchange = [], RSIGain = [], RSILoss = [],RSIAvgGain = [], RSIAvgLoss = [], RSIRS =  [],RSIRSI =[],RSI14DAYTRIAL = [];
		var transactions=[],transactionStart=[],transactionEnd=[],transactionID=[], TransactionProfitOrLoss=0,transactionIterator=0;
		var EMA1=[],EMA2=[], PreviousEMA1=[],PreviousEMA2=[],MACD=[],SignalLine=[];
		var option = "";
		var investment = 100000.00;

		var isRSIchecked="false",isMACDChecked="false",isEMA1Checked="false",isEMA2Checked="false",isBuydone="false";
		
		var output1="";
 var f = new XMLHttpRequest();
    f.open("GET", "Result_ACCtxt.txt", false);
    f.onreadystatechange = function ()
    {
        if(f.readyState === 4)
        {
            if(f.status === 200 || f.status == 0)
            {
                var res= f.responseText;
                alert(res);
		    console.log(res);
		    var lineoutput = res.split("\n");
		for (var x=0;x<lineoutput.length;x++)
					{
					//console.log("output-->"+lineoutput[x]);
					var details= lineoutput[x].split(",");
					//for (var y=0;y<details.length;y++)
					//console.log(details[0]+","+details[1]+","+details[2]+","+details[3]+","+details[4]+","+details[5]);
					s.push(details[0]);
					d.push(details[1]);
					t.push(details[2]);					
					o.push(details[3]);
					h.push(details[4]);
					l.push(details[5]);
					c.push(details[6]);
					
				
					}
		    	option = "RSI";
					nMovingAverage = 2;
					nMovingAverage1 =12;
					nMovingAverage2 =26;
					
					//initial configuration
					for(var x=0;x<c.length;x++)
					{
					PreviousEMA1[x] = 0.0;
					PreviousEMA2[x] = 0.0;
					SignalLine [x]=0.0;
					RSIchange[x]=0.0;
					
					

					if(x>0)
					RSIchange[x] = c[x]-c[x-1];
					else
					RSIchange[x] = 0.0;
					
					if(parseFloat(RSIchange[x]) > 0.0)
					RSIGain[x] = RSIchange[x];
					else 
					RSIGain[x] = 0.0;
					if(parseFloat(RSIchange[x]) < 0.0)
					RSILoss[x] = RSIchange[x];
					else
					RSILoss[x] = 0.0;
					
					console.log("close:"+c[y]+"--->RSI change:"+RSIchange[x]+"--- >RSI GAIN:"+RSIGain[x]+"-- >RSI LOSS:"+RSILoss[x] );
					if(x<14)
					{
					RSIAvgGain[x]=0.0;
					RSIAvgLoss[x]=0.0;
					RSIRS[x]=0.0;
					}
					RSIAvgLoss[x]=0.0;
					RSIAvgGain[x]=0.0;
					if(x==14)
					  {
						for(var y =0;y<14;y++){
							RSIAvgGain[x]= parseFloat(RSIAvgGain[x]) + parseFloat(RSIGain[y]);
							RSIAvgLoss[x]= parseFloat(RSIAvgLoss[x]) + parseFloat(RSILoss[y]);
							}
						RSIAvgGain[x] = parseFloat(RSIAvgGain[x])/14;
						RSIAvgLoss[x] = parseFloat(RSIAvgLoss[x])/14;
						if(RSIAvgLoss[x]<0)
						RSIAvgLoss[x]= -RSIAvgLoss[x];
						RSIRS[x]=parseFloat(RSIAvgGain[x])/parseFloat(RSIAvgLoss[x]);
						RSIRSI[x]=100- 100/(1+RSIRS[x]);
						console.log("RSI Indicator----------------------------------------------------------- >"+parseFloat(RSIRSI[x]));
					  }
					if(x>14)
					  {
						RSIAvgGain[x]= (parseFloat(RSIAvgGain[x-1])*13 +parseFloat(RSIGain[x]))/14;
						RSIAvgLoss[x]= (parseFloat(RSIAvgLoss[x-1])*13 +parseFloat(RSILoss[x]))/14;
						if(RSIAvgLoss[x]<0)
						RSIAvgLoss[x]= -RSIAvgLoss[x];
						RSIRS[x]=parseFloat(RSIAvgGain[x])/parseFloat(RSIAvgLoss[x]);
						RSIRSI[x]=100- 100/(1+RSIRS[x]);
						console.log("RSI Indicator------------------------------------------------------------------------------------------ >"+parseFloat(RSIRSI[x]));
					  }
            }
        }
    }
    f.send(null);
}
	</script>
	<script>
	</script>
</body>
</html>
